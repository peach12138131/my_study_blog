<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
    <!-- 样式定义 -->
    <defs>
        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
        </marker>
    </defs>
    
    <!-- 标题 -->
    <text x="450" y="30" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">OpenManus 项目架构图</text>
    
    <!-- 底层基础组件 -->
    <rect x="50" y="100" width="800" height="100" rx="10" ry="10" fill="#e6f7ff" stroke="#1890ff" stroke-width="2"/>
    <text x="450" y="130" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">底层基础组件</text>
    
    <rect x="80" y="150" width="120" height="30" rx="5" ry="5" fill="#fff" stroke="#1890ff" stroke-width="1"/>
    <text x="140" y="170" font-family="Arial" font-size="14" text-anchor="middle">config.py</text>
    
    <rect x="220" y="150" width="120" height="30" rx="5" ry="5" fill="#fff" stroke="#1890ff" stroke-width="1"/>
    <text x="280" y="170" font-family="Arial" font-size="14" text-anchor="middle">schema.py</text>
    
    <rect x="360" y="150" width="120" height="30" rx="5" ry="5" fill="#fff" stroke="#1890ff" stroke-width="1"/>
    <text x="420" y="170" font-family="Arial" font-size="14" text-anchor="middle">llm.py</text>
    
    <rect x="500" y="150" width="120" height="30" rx="5" ry="5" fill="#fff" stroke="#1890ff" stroke-width="1"/>
    <text x="560" y="170" font-family="Arial" font-size="14" text-anchor="middle">logger.py</text>
    
    <rect x="640" y="150" width="120" height="30" rx="5" ry="5" fill="#fff" stroke="#1890ff" stroke-width="1"/>
    <text x="700" y="170" font-family="Arial" font-size="14" text-anchor="middle">exceptions.py</text>
    
    <!-- 中间抽象层 -->
    <rect x="50" y="230" width="800" height="100" rx="10" ry="10" fill="#f6ffed" stroke="#52c41a" stroke-width="2"/>
    <text x="450" y="260" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">中间抽象层</text>
    
    <rect x="80" y="280" width="180" height="30" rx="5" ry="5" fill="#fff" stroke="#52c41a" stroke-width="1"/>
    <text x="170" y="300" font-family="Arial" font-size="14" text-anchor="middle">agent/base.py</text>
    
    <rect x="280" y="280" width="180" height="30" rx="5" ry="5" fill="#fff" stroke="#52c41a" stroke-width="1"/>
    <text x="370" y="300" font-family="Arial" font-size="14" text-anchor="middle">tool/base.py</text>
    
    <rect x="480" y="280" width="180" height="30" rx="5" ry="5" fill="#fff" stroke="#52c41a" stroke-width="1"/>
    <text x="570" y="300" font-family="Arial" font-size="14" text-anchor="middle">flow/base.py</text>
    
    <rect x="680" y="280" width="150" height="30" rx="5" ry="5" fill="#fff" stroke="#52c41a" stroke-width="1"/>
    <text x="755" y="300" font-family="Arial" font-size="14" text-anchor="middle">tool_collection.py</text>
    
    <!-- 上层实现层 -->
    <rect x="50" y="360" width="800" height="180" rx="10" ry="10" fill="#fff7e6" stroke="#fa8c16" stroke-width="2"/>
    <text x="450" y="390" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">上层实现层</text>
    
    <!-- Agent实现 -->
    <rect x="80" y="410" width="230" height="110" rx="5" ry="5" fill="#fff2e8" stroke="#fa8c16" stroke-width="1"/>
    <text x="195" y="430" font-family="Arial" font-size="16" text-anchor="middle">Agent实现</text>
    
    <rect x="90" y="440" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="140" y="457" font-family="Arial" font-size="12" text-anchor="middle">react.py</text>
    
    <rect x="90" y="470" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="140" y="487" font-family="Arial" font-size="12" text-anchor="middle">toolcall.py</text>
    
    <rect x="200" y="440" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="250" y="457" font-family="Arial" font-size="12" text-anchor="middle">manus.py</text>
    
    <rect x="200" y="470" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="250" y="487" font-family="Arial" font-size="12" text-anchor="middle">planning.py</text>
    
    <!-- Tool实现 -->
    <rect x="330" y="410" width="230" height="110" rx="5" ry="5" fill="#fff2e8" stroke="#fa8c16" stroke-width="1"/>
    <text x="445" y="430" font-family="Arial" font-size="16" text-anchor="middle">Tool实现</text>
    
    <rect x="340" y="440" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="390" y="457" font-family="Arial" font-size="12" text-anchor="middle">python_execute.py</text>
    
    <rect x="340" y="470" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="390" y="487" font-family="Arial" font-size="12" text-anchor="middle">browser_use_tool.py</text>
    
    <rect x="450" y="440" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="500" y="457" font-family="Arial" font-size="12" text-anchor="middle">google_search.py</text>
    
    <rect x="450" y="470" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="500" y="487" font-family="Arial" font-size="12" text-anchor="middle">file_saver.py</text>
    
    <!-- Flow实现 -->
    <rect x="580" y="410" width="230" height="110" rx="5" ry="5" fill="#fff2e8" stroke="#fa8c16" stroke-width="1"/>
    <text x="695" y="430" font-family="Arial" font-size="16" text-anchor="middle">Flow实现</text>
    
    <rect x="590" y="440" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="640" y="457" font-family="Arial" font-size="12" text-anchor="middle">planning.py</text>
    
    <rect x="700" y="440" width="100" height="25" rx="3" ry="3" fill="#fff" stroke="#fa8c16" stroke-width="1"/>
    <text x="750" y="457" font-family="Arial" font-size="12" text-anchor="middle">flow_factory.py</text>
    
    <!-- 最上层应用层 -->
    <rect x="50" y="570" width="800" height="100" rx="10" ry="10" fill="#f9f0ff" stroke="#722ed1" stroke-width="2"/>
    <text x="450" y="600" font-family="Arial" font-size="18" text-anchor="middle" font-weight="bold">最上层应用层</text>
    
    <rect x="200" y="620" width="200" height="30" rx="5" ry="5" fill="#fff" stroke="#722ed1" stroke-width="1"/>
    <text x="300" y="640" font-family="Arial" font-size="14" text-anchor="middle">prompt/ 目录</text>
    
    <rect x="500" y="620" width="200" height="30" rx="5" ry="5" fill="#fff" stroke="#722ed1" stroke-width="1"/>
    <text x="600" y="640" font-family="Arial" font-size="14" text-anchor="middle">应用入口</text>
    
    <!-- 依赖关系箭头 -->
    <!-- 底层到中间层 -->
    <line x1="170" y1="200" x2="170" y2="230" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="280" y1="200" x2="280" y2="230" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="420" y1="200" x2="420" y2="230" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="560" y1="200" x2="560" y2="230" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="700" y1="200" x2="700" y2="230" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    
    <!-- 中间层到上层 -->
    <line x1="170" y1="330" x2="170" y2="360" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="370" y1="330" x2="370" y2="360" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="570" y1="330" x2="570" y2="360" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="755" y1="330" x2="755" y2="360" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    
    <!-- 上层到应用层 -->
    <line x1="195" y1="540" x2="300" y2="570" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="445" y1="540" x2="300" y2="570" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
    <line x1="695" y1="540" x2="600" y2="570" stroke="#333" stroke-width="1.5" marker-end="url(#arrowhead)"/>
</svg>